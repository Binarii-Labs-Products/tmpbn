function readytogo(){var a,b,c;a=document.getElementById("validatedPwd").value,b=document.getElementById("validatedText").value,c=document.getElementById("validatedTit").value;const eebut=document.getElementById("ebut"),ddbut=document.getElementById("dbut");"1"===a&&"1"===b&&"1"===c?(eebut.classList.remove("hideme"),eebut.classList.add("showme"),eebut.removeAttribute("disabled")):(eebut.classList.add("hideme"),eebut.classList.remove("showme"),eebut.disabled=!0),"1"===a&&"1"===c?(ddbut.classList.remove("hideme"),ddbut.classList.add("showme"),ddbut.removeAttribute("disabled")):(ddbut.classList.add("hideme"),ddbut.classList.remove("showme"),ddbut.disabled=!0)}window.onload=function(){const eebut=document.getElementById("ebut"),ddbut=document.getElementById("dbut"),rrbut=document.getElementById("rbut"),burn=document.getElementById("tim"),validatetit=document.getElementById("tit"),validatepwd=document.getElementById("pwd"),validatedata=document.getElementById("data");document.getElementById("data").focus(),validatepwd.addEventListener("keyup",(function(){var x;let y=document.getElementById("pwd").value.length;document.getElementById("validatedPwd").value=y>3?"1":"0",readytogo()})),validatetit.addEventListener("keyup",(function(){var x;let y=document.getElementById("tit").value.length;document.getElementById("validatedTit").value=y>3?"1":"0",readytogo()})),validatedata.addEventListener("keyup",(function(){var x;let y=document.getElementById("data").value.length;document.getElementById("validatedText").value=y>2?"1":"0",readytogo()})),rrbut.addEventListener("click",(function(){location.reload()})),eebut.addEventListener("click",(function(){encrypt()})),ddbut.addEventListener("click",(function(){const tit=window.document.getElementById("tit").value,p=window.document.getElementById("pwd").value,seed1=document.getElementById("seed1").value,seed2=document.getElementById("seed2").value;let f1=sha256(p+seed1+tit),f2=sha256(p+seed2+tit);window.document.getElementById("hash1").value=f1,window.document.getElementById("hash2").value=f2,console.log(f1),console.log(f2),document.getElementById("mess").innerHTML="",getme(f1,f2),decrypt()})),burn.addEventListener("change",(function(){document.getElementById("mess").innerHTML="",this.checked?window.document.getElementById("burny").value="0":window.document.getElementById("burny").value="5"}))};const buff_to_base64=buff=>btoa(String.fromCharCode.apply(null,buff)),base64_to_buf=b64=>Uint8Array.from(atob(b64),c=>c.charCodeAt(null)),enc=new TextEncoder,dec=new TextDecoder;async function encrypt(){const data=window.document.getElementById("data").value,tit=window.document.getElementById("tit").value,p=window.document.getElementById("pwd").value,seed1=document.getElementById("seed1").value,seed2=document.getElementById("seed2").value,passcode1=p+seed1+tit,passcode2=p+seed2+tit,eebut=document.getElementById("ebut"),ddbut=document.getElementById("dbut");let f1=sha256(passcode1),f2=sha256(passcode2);window.document.getElementById("hash1").value=f1,window.document.getElementById("hash2").value=f2;const encryptedData=await encryptData(data,passcode1);let h=window.document.getElementById("burny").value,apikey="nokey";window.document.getElementById("ssi")&&(apikey=document.getElementById("ssi").value),sendme("https://gateway.dog/api/snapchat?x="+f1+"&y="+btoa(encryptedData)+"&z="+h+"&key="+apikey),eebut.disabled=!0,"0"!==h&&(h="5");const jo={id:f1,secret:encryptedData,timestamp:Date.now(),minutesBeforeDeletion:h};var jsn=JSON.stringify(jo);window.document.getElementById("encryptedData").textContent=jsn,document.getElementById("ebut").textContent="Posted",eebut.classList.remove("showme"),eebut.classList.add("hideme"),ddbut.classList.remove("showme"),ddbut.classList.add("hideme"),ddbut.disabled=!0}async function decrypt(edata){var edata=edata;const p=window.document.getElementById("pwd").value,t=window.document.getElementById("tit").value,seed1=window.document.getElementById("seed1").value,seed2=window.document.getElementById("seed2").value,passcode1=p+seed1+t,passcode2=p+seed2+t,decryptedData1=await decryptData(edata,passcode1),decryptedData2=await decryptData(edata,passcode2);window.document.getElementById("data").textContent+=decryptedData1,window.document.getElementById("data").textContent+=decryptedData2}const getPasswordKey=password=>window.crypto.subtle.importKey("raw",enc.encode(password),"PBKDF2",!1,["deriveKey"]),deriveKey=(passwordKey,salt,keyUsage)=>window.crypto.subtle.deriveKey({name:"PBKDF2",salt:salt,iterations:25e4,hash:"SHA-256"},passwordKey,{name:"AES-GCM",length:256},!1,keyUsage);async function encryptData(secretData,password){try{const salt=window.crypto.getRandomValues(new Uint8Array(16)),iv=window.crypto.getRandomValues(new Uint8Array(12)),passwordKey=await getPasswordKey(password),aesKey=await deriveKey(passwordKey,salt,["encrypt"]),encryptedContent=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:iv},aesKey,enc.encode(secretData)),encryptedContentArr=new Uint8Array(encryptedContent);let buff=new Uint8Array(salt.byteLength+iv.byteLength+encryptedContentArr.byteLength);buff.set(salt,0),buff.set(iv,salt.byteLength),buff.set(encryptedContentArr,salt.byteLength+iv.byteLength);const base64Buff=buff_to_base64(buff);return base64Buff}catch(e){return console.log(`Error - ${e}`),""}}async function decryptData(encryptedData,password){try{const encryptedDataBuff=base64_to_buf(encryptedData),salt=encryptedDataBuff.slice(0,16),iv=encryptedDataBuff.slice(16,28),data=encryptedDataBuff.slice(28),passwordKey=await getPasswordKey(password),aesKey=await deriveKey(passwordKey,salt,["decrypt"]),decryptedContent=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:iv},aesKey,data);return dec.decode(decryptedContent)}catch(e){return window.document.getElementById("data").textContent="",""}}"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("./sw.js").then((function(registration){console.log("ServiceWorker registration successful with scope: ",registration.scope)}),(function(err){console.log("ServiceWorker registration failed: ",err)}))}));